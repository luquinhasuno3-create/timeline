<!DOCTYPE html>
<html lang="pt-BR">
<head>
 	<meta charset="UTF-8">
 	<meta name="viewport" content="width=device-width, initial-scale=1.0">
 	<title>Timeline Unloop Filmes - v28 (Final)</title>
 	<link rel="stylesheet" href="styles.css">
</head>
<body>
 	<div class="loading-overlay" id="loading-overlay">
 	 	<canvas id="logo-canvas"></canvas>
 	 	<div id="loading-status-text"></div>
 	</div>
 	 
 	<div id="screensaver-overlay">
 	 	 <canvas id="screensaver-canvas"></canvas>
 	</div>

 	<div id="notice-board" class="glass collapsed">
 	 	<div id="notice-board-header">
 	 	 	<div class="icon-click-area"></div>
 	 	 	<span class="header-icon">🚨</span>
 	 	 	<span class="header-text"> Avisos</span>
 	 	</div>
 	 	<div id="notice-board-content">
 	 	</div>
 	</div>

 	<svg width="0" height="0" style="position:absolute; left: -9999px;">
 	 	<defs>
 	 	 	<path id="path-1" d="M35.2,139.9c.3,39.3.3,40.1,2.6,45,5.7,12.4,13,18.5,25.1,21.1,13.4,2.7,26.7-1,34.8-9.9,4.6-5.1,9.1-14.9,10.3-22.3.6-3.3,1-21.3,1-40.1s.3-34.3.8-34.5c.4-.2,8-.2,17,0l16.2.4v40.3c0,43-.6,49.9-5.2,61.5-7.8,19.7-24.5,33-47.8,38.1-29.5,6.4-61.2-5-77.7-27.9C1.3,196.3,0,188.2,0,137.2v-37.8l16.8-.2c9.2-.2,17-.1,17.4.2s.8,18.5,1,40.5Z"></path>
 	 	 	<path id="path-2" d="M142,225.4v16h-16.7l-16.8-.1,5-2.6c11.2-5.8,20-14.5,25.4-25.1,1.2-2.3,2.4-4.2,2.6-4.2.3,0,.5,7.2,.5,16Z"></path>
 	 	 	<path id="path-3" d="M197.2,101.3c30.3,7.8,50.1,28.9,53.8,57.3.5,4,1,24.3,1,45v37.8h-34.9l-.3-40.3-.3-40.2-3.1-6.5c-4.2-8.9-8.4-13.4-16.2-17.2-6.2-3.1-7.4-3.3-16.7-3.3-8.7,0-10.7.3-15.5,2.6-5.4,2.6-10.8,7.2-13.8,11.6-.8,1.3-1.7,2.3-2.1,2.3-.7,0-.2-45.2.5-45.9.3-.3,4.4-1.5,9.2-2.8,11.6-2.9,27.7-3.1,38.4-.4Z"></path>
 	 	 	<path id="path-4" d="M252.7,70.6l.2,70.3-2.4-5.4c-5.4-11.7-16.6-24.1-27.5-30.4l-4-2.2v-51.1c0-28.1.2-51.3.5-51.5.2-.3,7.8-.4,16.7-.2l16.3.3.2,70.2Z"></path>
 	 	 	<path id="path-5" d="M363.9,100c22.5,5.7,44,26.7,50.5,49.6,2.3,8,3.1,21.9,1.7,30.7-4.7,29.9-28.9,54.1-59.2,59-3.5.6-21.3,1.1-39.6,1.1-35.1,0-42-.6-53.5-5l-5.8-2.1v-44.7l5.8,5.7c3.1,3.1,8,6.8,10.7,8.2,5,2.4,5.1,2.4,42.1,2.7,43.1.3,43.9.2,53.9-8.9,10.3-9.5,14.4-22.8,11.1-35.9-2.9-11.1-9.4-19.2-19.9-24.7-4.7-2.5-6.2-2.7-15.7-2.8-8.7,0-11.3.4-15.3,2.2-6.6,3.1-15.2,11.5-18.4,18.2-2.5,5-2.8,6.7-2.8,15.6s.3,10.6,2.9,16c1.7,3.3,5.2,8.1,7.9,10.7l4.8,4.8h-43.9l-1.5-3.9c-5.2-12.9-6.5-31-3.3-44.5,5.3-22.3,24.6-43.3,46.5-50.6,3.5-1.1,8.9-2.5,12-3,7-1.1,21.5-.3,29,1.6Z"></path>
 	 	 	<path id="path-6" d="M424,189.5c3.2,5.3,9.1,10.2,16.4,13.5,5.1,2.3,6.6,2.6,15.4,2.2,11.9-.4,17.1-2.6,25.5-10.9l5.7-5.7v44.6l-6.9,2.5c-23.7,8.8-51.1,4.4-70-11.3l-6-5,4.8-7.3c4.7-7,9.5-17.6,10.7-23.7.4-1.6.9-3,1.3-3,.3,0,1.7,1.9,3.1,4.1Z"></path>
 	 	 	<path id="path-7" d="M474,100.5c3.9,1.1,9.1,2.9,11.4,4.1,5.1,2.5,15.5,9.8,18,12.7,1.9,2,1.8,2.1-2.1,7.4-5.2,6.9-8.1,12.6-10.8,21.1l-2.1,7-3.2-4.6c-3.6-5.2-8.5-9.4-15.2-12.9-3.9-2-5.9-2.4-15-2.4s-11,.3-16.2,2.8c-5.3,2.6-16.8,13.4-16.8,15.8,0,.5-.4.9-.8.9-.5,0-1.4-2.3-2-5-1.6-7-5.4-14.8-10.9-22.2l-4.6-6.2,4.4-3.8c18-15.7,42.6-21.2,65.9-14.7Z"></path>
 	 	 	<path id="path-8" d="M583.6,100.9c18.2,5.3,35.3,19.7,43.8,36.9,4.9,9.8,6.9,19,6.9,31.6,0,18.8-6,34.1-18.5,47.5-8.7,9.3-18.6,16-29.7,19.9-8,2.9-9.5,3.1-22.6,3-12.9,0-14.7-.2-22.5-2.9l-8.5-3-.3-22.1-.2-22,5.8,5.6c7.7,7.6,14.1,10,26,10,7.6,0,9.5-.4,15-3,15.4-7.3,24-23.4,21.1-39.4-.6-3.3-2-7.8-3.1-10-3.1-6.1-11.1-13.9-17.5-17.2-5.3-2.6-6.7-2.9-15.8-2.9s-10.6.3-15.8,2.8c-10.9,5.4-18.5,15.2-20.7,26.6-.6,3.4-1,34.9-1,83.7v78.4h-34.1l.3-84.8c.3-79,.5-85.1,2.2-90.2,7.5-22.5,24.6-40.3,45.6-47.6,12.4-4.3,30.6-4.7,43.6-.9Z"></path>
 	 	 	</defs>
 	 	</svg>
 	 
 	<div class="background-gradient"></div>
    <div id="background-animation-container">
        <canvas id="animatedCanvas"></canvas>
    </div>
    <div class="br-mode-overlay"></div>

 	<div class="content-wrapper" id="content-wrapper">
 	 	<header class="header glass">
 	 	 	<div class="header-content">
 	 	 	 	<h1 class="header-title" id="header-title">Timeline Unloop</h1>
 	 	 	 	<div class="controls">
 	 	 	 	 	<div class="update-indicator" id="updateIndicator">✅ Atualizado</div>
                    <button class="control-btn" id="refreshDataBtn" onclick="handleRefreshData()" aria-label="Atualizar dados da planilha" title="Atualizar dados da planilha">🔄</button>
 	 	 	 	 	<button class="control-btn" id="toggleEffectsBtn" onclick="toggleVisualEffects()" aria-label="Ativar/Desativar Efeitos Visuais">✨</button>
 	 	 	 	 	<button class="control-btn zoom-btn" onclick="zoomIn()" aria-label="Aumentar zoom">🔍+</button>
 	 	 	 	 	<button class="control-btn zoom-btn" onclick="zoomOut()" aria-label="Diminuir zoom">🔍-</button>
 	 	 	 	 	<div class="button-stack">
 	 	 	 	 	 	<button class="control-btn" id="saveChangesBtn" title="Salvar Página" aria-label="Salvar alterações e baixar HTML">💾</button>
 	 	 	 	 	 	<button class="control-btn" id="manualBtn" title="Manual" aria-label="Abrir guia rápido">📖</button>
 	 	 	 	 	</div>
 	 	 	 	</div>
 	 	 	</div>
 	 	</header>
 	 	<main class="main-layout">
 	 	 	<nav class="filter-menu-horizontal glass" aria-label="Filtros da Timeline">
 	 	 	 	 <div class="filter-tabs-horizontal">
                    <button class="reset-filters-btn" id="sort-projects-btn" aria-label="Ordenar projetos">🔀</button>
                    <button class="reset-filters-btn" id="master-toggle-btn" aria-label="Redefinir filtros e visualização">🗂️</button>
 	 	 	 	 	 <button class="filter-tab-horizontal" onclick="toggleFilterDropdown(event, 'projetos', this)">Projetos</button>
 	 	 	 	 	 <button class="filter-tab-horizontal" onclick="toggleFilterDropdown(event, 'clientes', this)">Clientes</button>
 	 	 	 	 	 <button class="filter-tab-horizontal" onclick="toggleFilterDropdown(event, 'categorias', this)">Categorias</button>
 	 	 	 	 	 <button class="filter-tab-horizontal" onclick="toggleFilterDropdown(event, 'tarefas', this)">Tarefas</button>
 	 	 	 	 	 <button class="filter-tab-horizontal" onclick="toggleFilterDropdown(event, 'localizacao', this)">Localização</button>
 	 	 	 	 </div>
 	 	 	 	 <div class="filter-dropdown" id="dropdown-projetos"><div class="filter-dropdown-content"><div class="filter-buttons-container" id="projetos-list"></div></div></div>
 	 	 	 	 <div class="filter-dropdown" id="dropdown-clientes"><div class="filter-dropdown-content"><div class="filter-buttons-container" id="clientes-list"></div></div></div>
 	 	 	 	 <div class="filter-dropdown" id="dropdown-categorias"><div class="filter-dropdown-content"><div class="filter-buttons-container" id="categorias-list"></div></div></div>
 	 	 	 	 <div class="filter-dropdown" id="dropdown-tarefas"><div class="filter-dropdown-content"><div class="filter-buttons-container" id="tarefas-list"></div></div></div>
 	 	 	 	 <div class="filter-dropdown" id="dropdown-localizacao"><div class="filter-dropdown-content"><div class="filter-buttons-container" id="localizacao-list"></div></div></div>
 	 	 	 	</nav>
 	 	 	<div class="container" id="main-container">
 	 	 	 	<div class="timeline-container" id="timeline-container">
 	 	 	 	 	<div class="timeline-main" id="timeline-main">
 	 	 	 	 	 	<div id="today-line"></div>
                        <div id="week-separators"></div>
 	 	 	 	 	 	<div class="timeline-header-group" id="timeline-header-group">
 	 	 	 	 	 	 	<div class="header-spacer"></div>
 	 	 	 	 	 	</div>
 	 	 	 	 	 	<div class="timeline-content" id="timeline-content">
 	 	 	 	 	 	</div>
 	 	 	 	 	</div>
 	 	 	 	 	<div class="floating-controls">
 	 	 	 	 	 	<button class="control-btn edit-mode-btn" id="editModeBtn" onclick="toggleEditMode()" aria-label="Ativar/Desativar Modo de Edição" title="Ativar/Desativar Modo de Edição">✏️</button>
                        <button class="control-btn" id="addProjectBtn" aria-label="Adicionar Novo Projeto" title="Configurar Script de Novo Projeto">+</button>
 	 	 	 	 	 	<a href="https://docs.google.com/spreadsheets/d/1lpA82i_X-Wbk-T-hxHBywtYEbzqDP-BYM5LW7qb60MM/edit#gid=0" target="_blank" class="control-btn" id="sheetLink" aria-label="Abrir planilha no Google Sheets" title="Abrir Planilha">📅</a>
 	 	 	 	 	 	<button class="control-btn" id="clearCacheBtn" aria-label="Limpar cache local e recarregar" title="Limpar Cache e Recarregar">♻️</button>
 	 	 	 	 	</div>
 	 	 	 	</div>
                <div class="flag-icon" id="flag-icon">🇧🇷</div>
 	 	 	</div>
 	 	</main>
 	</div>

 	<div class="modal-overlay hidden" id="linkModal">
 	 	<div class="modal-content glass">
 	 	 	<h2 style="color: #FFFFFF;">Salvar Link em Novo Arquivo</h2>
 	 	 	<input type="text" id="scriptLinkInput" placeholder="Cole o novo link do Editor de Scripts (opcional)">
 	 	 	<button id="submitSaveBtn">Salvar e Baixar Arquivo HTML</button>
 	 	</div>
 	</div>

 	<div class="modal-overlay hidden" id="manualModal">
 	 	<div class="modal-content glass">
 	 	 	<h2>📘 Guia Rápido – Timeline Unloop Filmes</h2>
 	 	 	<div class="manual-text">
 	 	 	 	<h3>1. Navegação</h3>
 	 	 	 	<ul>
 	 	 	 	 	<li><b>Agulha do Tempo:</b> A linha vermelha indica o dia de hoje.</li>
 	 	 	 	 	<li><b>Clique em qualquer dia:</b> Rola a visualização para centralizar o dia de hoje.</li>
 	 	 	 	 	<li><b>Clique no retângulo do projeto:</b> Rola a visualização até a última tarefa daquele projeto.</li>
 	 	 	 	 	<li><b>Clique no nome do projeto:</b> Expande ou recolhe as categorias e tarefas (clique simples vs. duplo).</li>
 	 	 	 	</ul>
 	 	 	 	<h3>2. Modo de Edição (✏️ Ativo por padrão)</h3>
                <ul>
                    <li><b>Duplo clique em célula:</b> Edita ou cria uma tarefa. Enter salva, Esc cancela.</li>
                    <li><b>Arrastar tarefa:</b> Move uma tarefa para outro dia ou troca de lugar com outra.</li>
                    <li><b>Shift + Arrastar tarefa:</b> Duplica uma tarefa para uma célula vazia.</li>
                    <li><b>Arrastar filtro de tarefa:</b> Arraste um botão de tarefa dos menus "Tarefas" ou "Localização" para uma célula vazia para criar uma nova tarefa rapidamente.</li>
                    <li><b>Ctrl + Z:</b> Desfaz a última alteração.</li>
                </ul>
 	 	 	 	<h3>3. Botões e Filtros</h3>
 	 	 	 	<ul>
                    <li>🔄 <b>Atualizar Dados:</b> Recarrega todas as configurações e tarefas da planilha sem atualizar a página.</li>
                    <li>✨ <b>Otimização:</b> Liga/desliga efeitos visuais pesados para melhorar a performance.</li>
 	 	 	 	 	<li>📅 <b>Planilha:</b> Abre o Google Sheets correspondente.</li>
 	 	 	 	 	<li>🔑 <b>Script:</b> Após editar, clique em ✏️ novamente para desativar. Um código será copiado. Cole e execute esse código no Editor de Scripts do Google para salvar as mudanças.</li>
 	 	 	 	 	<li>🗂️ <b>Reset:</b> Limpa todos os filtros aplicados e alterna a expansão dos projetos.</li>
 	 	 	 	 	<li><b>Filtros (Projetos, Clientes, etc.):</b> Clique para selecionar/desselecionar itens. A lógica pode variar (seleção múltipla ou única).</li>
 	 	 	 	</ul>
 	 	 	 	<h3>4. Interações Visuais</h3>
 	 	 	 	<ul>
 	 	 	 	 	<li><b>Linha do mês:</b> Clicar na barra de um mês altera o esquema de cores.</li>
 	 	 	 	 	<li><b>Finais de semana:</b> Clicar nas colunas de sábado/domingo alterna o encolhimento.</li>
 	 	 	 	 	<li><b>Fundo:</b> Clicar no canto esquerdo da tela escurece o fundo; clicar no direito altera as cores.</li>
                    <li><b>🇧🇷 Bandeira:</b> Ativa/desativa o "Modo BR" de alto contraste e baixa saturação.</li>
 	 	 	 	</ul>
 	 	 	 	<h3>5. Modo Suspensão (4 min de inatividade)</h3>
 	 	 	 	<ul>
 	 	 	 	 	<li>Use o scroll, setas e teclas +/- para interagir com a animação.</li>
 	 	 	 	 	<li><b>Sair:</b> Pressione ESC ou mova o mouse.</li>
 	 	 	 	</ul>
 	 	 	</div>
 	 	 	<button id="closeManualBtn" style="margin-top: 15px;">Sair</button>
 	 	</div>
 	</div>

    <div class="modal-overlay hidden" id="projectConfigModal">
        <div class="modal-content glass">
            <div id="project-form-container" style="display: flex; flex-direction: column; align-items: center; width: 100%; gap: 20px;">
                <h2>Configurar Novo Projeto</h2>
                <div class="input-group">
                    <input type="text" id="configProjectName" required placeholder=" ">
                    <span class="ghost-placeholder">(xxxx_NOME-DO-PROJETO)</span>
                </div>
                <div class="input-group">
                    <input type="text" id="configClientName" required placeholder=" ">
                    <span class="ghost-placeholder">(Cliente)</span>
                </div>
                <div class="input-group">
                    <input type="text" id="configCity" required placeholder=" ">
                    <span class="ghost-placeholder">Localização (Cidade)</span>
                </div>
                <div class="color-picker-wrapper">
                   <div class="form-group">
                       <input type="color" id="configMainColor" value="#999999">
                   </div>
                </div>
                 <div class="options-group">
                    <button class="option-box-btn" id="createInSheetBtn">Criar na Planilha</button>
                    <button class="option-box-btn" id="createInDriveBtn">Criar Pasta no Drive</button>
                </div>
                <div class="button-group">
                    <button id="generateScriptBtn" class="control-btn generate-btn">Salvar Ação</button>
                    <button id="closeConfigModalBtn" class="control-btn">Fechar</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal-overlay hidden" id="schedulingModal">
        <div class="modal-content glass">
            <h2>Agendar Tarefa</h2>
            <div class="input-group">
                <input type="text" id="scheduleTitle" required placeholder="Título do Evento">
            </div>
            <div class="input-group">
                <textarea id="scheduleDescription" rows="3" placeholder="Descrição (opcional)"></textarea>
            </div>
            <div class="input-group">
                <input type="date" id="scheduleDate">
            </div>
             <div class="input-group">
                <input type="time" id="scheduleTime" value="11:00">
            </div>
            <div class="input-group guests-input-group">
                <input type="text" id="scheduleGuests" placeholder="Convidados">
                <div class="guest-list-popup hidden"></div>
            </div>
            <label class="checkbox-label">
                <input type="checkbox" id="scheduleMeet" checked>
                Criar link para Google Meet
            </label>
            <div class="button-group">
                <button id="saveScheduleBtn" class="control-btn generate-btn">Salvar Ação</button>
                <button id="closeScheduleBtn" class="control-btn">Fechar</button>
            </div>
        </div>
    </div>

    <div class="tooltip"></div>
    <div class="drag-tooltip"></div>
    <script id="script-tag" src="script.js"></script>
</body>
</html>